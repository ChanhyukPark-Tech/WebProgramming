# Bundling 

## 계기

학교 시험기간이라고 리액트 프로젝트를 진행하면서, 기능을 구현하는데 급급하여 코드를 이해하지 않고 진행했던 것 같다. 다시금 반성하며 이유없는 코드 이해하지 못한 코드를 작성하지 않도록 노력해야겠다.
지금까지는 리액트가 해줘서 고민하지 않았던 것 같다.
회사에서 프로젝트를 해도 사수님께서 프로젝트 세팅을 해주셔서 크게 고민하지 않았던 것 같다.
이번에 Design System 을 구축하면서 npm 으로 library 관리를 해야하는 경우가 발생하였고, 이에 따라서 bundling 에 대해 깊게 고민하고 싶어졌다.

## 번들링(bundling) 이란

가장 핵심은 개발에서 편하게 사용하기 위해서 여러 파일을 모듈로 관리했던 것들을 배포시에는 분산되어있을 필요가 없으므로 빌드시에 한 파일로 묶어주는 것이다.
bundle 이 묶음이라는 뜻을 갖고 있다는 것을 알고 나니 이해가 한층 싶게 되었다.

어렵게 설명하면 모듈들의 의존성 관계를 파악하여 그룹화시켜주는 작업이다.

당연히 프로젝트가 작다면 번들링에게 큰 효과를 기대하기 어렵겠지만, 프로젝트가 커지면 커질수록 우리의 js,ts 파일은 많아지고 그에 따른 번들링의 효과는 극대화된다.

## 일단 효과부터 보자

### 번들링 미사용시

사용된 파일 그대로 빌드된다.

![image](https://user-images.githubusercontent.com/69495129/175758316-9c74d264-32c9-41a2-8127-fbf3902a69cc.png)


### 번들링 사용시

사용된 파일(모듈)들이 뭉쳐진다(번들) 

![image](https://user-images.githubusercontent.com/69495129/175758331-b952d378-a3d5-426f-88ea-32c91bed7717.png)

당연히 빠르겠지

## 번들러란?
번들링을 해주는 도구이다, 즉 여러 개의 파일을 묶어주는 도구.
번들러 === 웹펙 이라고 아시는 분들도 계시는데, 번들러중에 하나가 웹펙인 것이다. 웹펙이 가장 대중적인 번들러라서 그렇다.
어느 타이밍에 어느 번들러를 사용할지 고민하고 선택하는 것이 가장 중요하다.
번들러는 다 좋다. 다 자신의 역할인 번들링을 잘 수행해준다. 하지만 자신이 하고자하는 프로젝트나 상황에 알맞게 번들러를 선택하는것이 좋은 개발자의 덕목이 아닐까?
그렇다면 번들러의 비교를 통해서 어느 타이밍에 어느 번들러를 사용할 지 스킬을 키워보자.
가장 대중적인 세개의 번들러를 비교하겠다. 

![image](https://user-images.githubusercontent.com/69495129/175758407-ab37dad4-7e9c-45b4-9e84-fb25f73fe903.png)

### Parcel

일단 엄청 빠르고 간다하다.
fast , zero-configuration 특별한 설정이 필요없다.
웹펙 configuration 에서는 직접 번들링을 시작할 포인트(엔트리 포인트) 를 지정해준다.
그와 달리 Parcel 은 어플리케이션 진입을 위한 HTML 파일 자체를 읽는다.
즉 HTML 파일을 기준으로 자신이 Javascript , CSS, Image 등을 직접 참조한다.
또한 속도가 빠른 이유는 캐싱 때문이다.

### RollUp

이번에 디자인 시스템 라이브러리에서 회사에서 도입한 번들러이다. 
가장 큰 차이점은 ES6 모듈 형식으로 빌드 결과물을 출력하므로, 라이브러리나 패키지(npm) 등에 활용하기 좋다는 점이다. 이것이 우리팀이 라이브러리 번들링에 rollup 을 선택한 이유이다.
그래 ES6 모듈 형식을 지원해 근데 그게 뭐가 좋아? 이유가 뭔데?

```
es6 와 달리 webpack 같은경우는 일반적으로 commonjs 형태로 번들링을 하게 되는데, commonjs로 번들링한 라이브러리를 나중에 다른 프로젝트에서 사용하게 되면
Tree-shaking 이 지원되지 않는다.
```

그러면 `Tree-shaking`은 뭔데?

```
나무를 흔들어서 죽은 나뭇잎들을 떨어뜨리듯, 코드를 빌드할 때도 실제로 쓰지 않는 코드들을 제외한다는 뜻으로 Tree Shaking이란 이름이 붙여졌다고 한다.
모듈에서 실제로 사용하고 있는 코드만 빌드하려면 어떻게 할 수 있을까? 이럴 때 사용하는 것이 Tree Shaking이다
```

꽤 설정하는데 시간이 걸리고 복잡하다. 하지만, 많은 플러그인과 옵션을 설정할 수 있다. 

### Webpack 

래퍼런스가 가장 많고 오랫동안 사용되어 개발 래퍼런스가 많고, 그만큼 안정적이다.
최근에 라인 개발자분들이 운영하시는 개발자 유튜브 채널인 `라인개발실록` 에서 웹펙 공식문서 번역 오픈소스 기여 과정을 살펴봤는데, 대단하신 분들이 웹펙 문서를 한글화해주셨으니 참고해도 좋을 것 같다.

로더를 통해 JS 모듈과 JS 이외의 모듈들을 통합해준다, 
많은 외부 라이브러리들을 필요로 하는 복잡한 어플리케이션에 사용하면 좋다.


## 참고자료

[최소 설정으로 웹펙 써보기](https://www.youtube.com/watch?v=pzHMT9Jxce0)

[Webpack 기초 강좌 | 웹팩 이란 | 모듈번들러 | 프론트엔드 날개달기](https://www.youtube.com/watch?v=NGVc-zw2FG8&t=951s)


## ToDo
Rollup exercise
